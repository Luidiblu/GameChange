<div class="container mt-5">
  <div class="row my-2">
    <div class="col-3">
      <%= link_to "Exit this lobby", exit_lobby_path(@lobby), method: :post, class: "btn btn-danger w-100" %>
    </div>
    <div class="col-6">
      <p class="text-truncate w-100"><%= @lobby.description %></p>
    </div>
    <div class="col-3">
      <%= link_to "Edit the Lobby", edit_lobby_path(@lobby), class: "btn btn-warning w-100" %>
    </div>
  </div>

  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="shadow">
        <div class="d-flex align-items-center">
          <div class="card">
            <%= image_tag(@lobby.game.photo, class: "card-img") %>
          </div>
        </div>

        <div class="inside-game-lobby text-center">
          <p class="lobby-gamename-show text-truncate"><%= @lobby.game.name %></p>
          <p class="lobby-gamename-show text-truncate"><%= @lobby.description %></p>
          <div class="lobby-playersnumber-show">
            <i class="fas fa-user-alt playersinlobby"></i>
            <p><%= @lobby.users.count %></p>
            <i class="fas fa-user-alt" style="color: black;"></i>
            <p><%= @lobby.max_players - @lobby.users.count %></p>
          </div>
        </div>
      </div>
    </div>

    <div class="col-3 col-lg-3">
      <% @lobby.sessions.select(&:active?).each do |active_session| %>
        <%= link_to profile_path(active_session.user) do %>
        <div class="shadow avatarplayercard text-truncate lobby-gamename-show <%= 'border border-warning' if active_session.user == @owner %>">
          <%= image_tag "https://kitt.lewagon.com/placeholder/users/Luidiblu", class: "avatar" %>
          <%= active_session.user.nickname %>
        </div>
        <% end %>
      <% end %>
    </div>

    <div class="col-9 col-lg-6">
      <div class="chat-header">
        <h4><%= @lobby.description %></h4>
      </div>

      <div class="messages">
        <% @lobby.messages.each do |message| %>
          <%= render "messages/message", message: message %>
        <% end %>
      </div>

      <div class="create-message">
        <%= simple_form_for [ @lobby, Message.new ], remote: true do |f| %>
          <%= f.input :content, as: :string, label: false %>
          <%= f.submit %>
        <% end %>
      </div>
    </div>
  </div>
</div>
